<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aconselhamento Reformado: Teologia e Prática</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Slab:wght@300;400;700&display=swap');

        :root {
            --cor-primaria: #0d47a1;
            --cor-secundaria: #1976d2;
            --cor-destaque: #fdd835;
            --cor-texto: #333;
            --cor-fundo: #f4f6f8;
            --cor-branco: #ffffff;
            --sombra-card: 0 4px 8px rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Roboto Slab', serif;
            line-height: 1.8;
            color: var(--cor-texto);
            background-color: var(--cor-fundo);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 0;
        }

        header {
            background: linear-gradient(135deg, var(--cor-primaria), var(--cor-secundaria));
            color: var(--cor-branco);
            padding: 40px 20px;
            text-align: center;
            border-bottom: 5px solid var(--cor-destaque);
        }

        header h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.8em;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        #menu {
            background-color: var(--cor-branco);
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: var(--sombra-card);
            text-align: center;
        }

        .menu-btn {
            background-color: var(--cor-secundaria);
            color: var(--cor-branco);
            border: none;
            padding: 12px 20px;
            margin: 5px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }

        .menu-btn:hover, .menu-btn.active {
            background-color: var(--cor-primaria);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        main {
            flex-grow: 1;
        }

        #conteudo-central {
            background-color: var(--cor-branco);
            padding: 30px;
            border-radius: 8px;
            box-shadow: var(--sombra-card);
            min-height: 400px;
            transition: opacity 0.5s ease;
        }

        #conteudo-central h2 {
            font-family: 'Montserrat', sans-serif;
            color: var(--cor-primaria);
            border-bottom: 2px solid var(--cor-destaque);
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        #conteudo-central h3 {
            font-family: 'Montserrat', sans-serif;
            color: var(--cor-secundaria);
            margin-top: 30px;
        }

        .card {
            background-color: var(--cor-fundo);
            border-left: 5px solid var(--cor-secundaria);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.08);
        }
        
        .card-titulo {
            font-weight: 700;
            color: var(--cor-primaria);
            margin-top: 0;
        }

        .lista-interativa li {
            padding: 10px;
            border-bottom: 1px dashed #ddd;
        }
        
        .lista-interativa li:last-child {
            border-bottom: none;
        }
        
        .tabela-comparativa {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .tabela-comparativa th, .tabela-comparativa td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .tabela-comparativa th {
            background-color: var(--cor-primaria);
            color: var(--cor-branco);
            font-family: 'Montserrat', sans-serif;
        }
        
        .tabela-comparativa tr:nth-child(even) {
            background-color: var(--cor-fundo);
        }

        .citation {
            color: var(--cor-secundaria);
            font-size: 0.8em;
            font-weight: bold;
            cursor: help;
            transition: color 0.3s;
        }
        .citation:hover {
            color: var(--cor-primaria);
        }

        footer {
            background-color: var(--cor-texto);
            color: var(--cor-branco);
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }

        /* Estilos para responsividade */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }
            .menu-btn {
                display: block;
                width: 100%;
                margin: 8px 0;
            }
        }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <h1>Aconselhamento Reformado: Teologia e Prática</h1>
        </div>
    </header>

    <div class="container">
        <nav id="menu">
            </nav>

        <main id="conteudo-central">
            <h2>Bem-vindo!</h2>
            <p>Selecione um tópico no menu acima para explorar o conteúdo de forma interativa. Este material foi desenvolvido para ser um guia didático sobre a teologia e prática do aconselhamento cristão na tradição reformada.</p>
        </main>
    </div>

    <footer>
        <p>Desenvolvido por Rodrigo Niskier e Gemini.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menu = document.getElementById('menu');
            const conteudoCentral = document.getElementById('conteudo-central');

            const menuConfig = {
                "Fundamentos": { file: 'fundamentos_e_conselheiro.json', key: 'fundamentos' },
                "O Conselheiro": { file: 'fundamentos_e_conselheiro.json', key: 'conselheiro' },
                "Modelos e Métodos": { file: 'modelos_e_processo.json', key: 'modelos_metodos' },
                "O Processo": { file: 'modelos_e_processo.json', key: 'processo_aconselhamento' },
                "Temas Pastorais": { file: 'temas_e_contextos.json', key: 'temas_pastorais' },
                "Saúde Emocional e Vícios": { file: 'temas_e_contextos.json', key: 'saude_emocional_vicios' },
                "Contexto Familiar": { file: 'temas_e_contextos.json', key: 'contexto_familiar_conjugal' },
                "Situações de Crise": { file: 'temas_e_contextos.json', key: 'situacoes_crise' },
                "Estudos de Caso": { file: 'temas_e_contextos.json', key: 'teoria_pratica' },
                "A Igreja como Agente de Cura": { file: 'temas_e_contextos.json', key: 'aconselhamento_comunidade' },
                "Conclusão": { file: 'temas_e_contextos.json', key: 'conclusao' },
                "Bibliografia": { file: 'temas_e_contextos.json', key: 'bibliografia' }
            };

            // Criar botões do menu
            for (const nomeBotao in menuConfig) {
                const btn = document.createElement('button');
                btn.className = 'menu-btn';
                btn.textContent = nomeBotao;
                btn.dataset.file = menuConfig[nomeBotao].file;
                btn.dataset.key = menuConfig[nomeBotao].key;
                menu.appendChild(btn);
            }

            menu.addEventListener('click', (e) => {
                if (e.target.classList.contains('menu-btn')) {
                    const { file, key } = e.target.dataset;
                    
                    document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    
                    carregarConteudo(file, key);
                }
            });
            
            function parseCitations(text) {
                if (!text) return '';
                return text.replace(/\+)\]/g, '<span class="citation" title="Fonte: $1">[$1]</span>');
            }

            async function carregarConteudo(file, key) {
                conteudoCentral.style.opacity = '0';
                try {
                    const response = await fetch(file);
                    if (!response.ok) {
                        throw new Error(`Erro ao carregar o arquivo: ${response.statusText}`);
                    }
                    const data = await response.json();
                    const conteudo = data[key];
                    
                    setTimeout(() => {
                        renderizarConteudo(conteudo);
                        conteudoCentral.style.opacity = '1';
                    }, 300);

                } catch (error) {
                    console.error('Falha ao buscar conteúdo:', error);
                    conteudoCentral.innerHTML = `<h2>Erro</h2><p>Não foi possível carregar o conteúdo solicitado. Verifique o console para mais detalhes.</p>`;
                    conteudoCentral.style.opacity = '1';
                }
            }

            function renderizarConteudo(data) {
                let html = `<h2>${parseCitations(data.titulo)}</h2>`;
                if (data.introducao) {
                    html += `<p>${parseCitations(data.introducao)}</p>`;
                }
                if (data.texto) {
                    html += `<p>${parseCitations(data.texto)}</p>`;
                }

                // Renderizadores específicos para cada tipo de estrutura de dados
                if (data.conteudo) {
                    data.conteudo.forEach(item => {
                        html += `<h3>${parseCitations(item.subtitulo)}</h3><p>${parseCitations(item.texto)}</p>`;
                    });
                }
                
                if (data.tradicoes_relevantes) {
                    const trad = data.tradicoes_relevantes;
                    html += `<h3>${parseCitations(trad.titulo)}</h3><p>${parseCitations(trad.introducao)}</p>`;
                    trad.tradicoes.forEach(t => {
                        html += `<div class="card"><h4 class="card-titulo">${parseCitations(t.nome)}</h4><p>${parseCitations(t.descricao)}</p></div>`;
                    });
                }

                if (data.bases_biblicas) {
                    const bases = data.bases_biblicas;
                    html += `<h3>${parseCitations(bases.titulo)}</h3><p>${parseCitations(bases.introducao)}</p>`;
                    bases.pilares.forEach(p => {
                        html += `<div class="card"><h4 class="card-titulo">${parseCitations(p.nome)}</h4><p>${parseCitations(p.descricao)}</p></div>`;
                    });
                }

                if (data.qualidades_essenciais) {
                    const qual = data.qualidades_essenciais;
                    html += `<h3>${parseCitations(qual.titulo)}</h3><p>${parseCitations(qual.introducao)}</p>`;
                    qual.qualidades.forEach(q => {
                        html += `<div class="card"><h4 class="card-titulo">${parseCitations(q.nome)}</h4><p>${parseCitations(q.descricao)}</p></div>`;
                    });
                }
                
                if (data.responsabilidades_limites || data.analise_modelos_seculares || data.ministerio_consolo || data.areas_especificas || data.sofrimento_interno || data.abordagem_risco || data.luto_agudo) {
                    const section = data.responsabilidades_limites || data.analise_modelos_seculares || data.ministerio_consolo || data.areas_especificas || data.sofrimento_interno || data.abordagem_risco || data.luto_agudo;
                    html += `<h3>${parseCitations(section.titulo)}</h3>`;
                    if (section.introducao) html += `<p>${parseCitations(section.introducao)}</p>`;
                    const items = section.topicos || section.modelos;
                    items.forEach(item => {
                         html += `<div class="card"><h4 class="card-titulo">${parseCitations(item.nome)}</h4><p>${parseCitations(item.descricao)}</p></div>`;
                    });
                }

                if (data.formacao_discernimento) {
                    const form = data.formacao_discernimento;
                    html += `<h3>${parseCitations(form.titulo)}</h3><p>${parseCitations(form.introducao)}</p>`;
                    
                    const psico = form.diferenca_psicoterapia;
                    html += `<div class="card"><h4 class="card-titulo">${parseCitations(psico.titulo)}</h4><p>${parseCitations(psico.introducao)}</p><ul class="lista-interativa">`;
                    psico.diferencas.forEach(d => {
                        html += `<li><strong>${parseCitations(d.ponto)}:</strong> ${parseCitations(d.biblico)} <em>vs.</em> ${parseCitations(d.psicoterapia)}</li>`;
                    });
                    html += `</ul></div>`;
                    
                    const enc = form.criterios_encaminhamento;
                    html += `<div class="card"><h4 class="card-titulo">${parseCitations(enc.titulo)}</h4><p>${parseCitations(enc.introducao)}</p>`;
                    enc.criterios.forEach(c => {
                         html += `<p><strong>${parseCitations(c.nome)}:</strong> ${parseCitations(c.descricao)}</p>`;
                    });
                    html += `</div>`;
                }
                
                if (data.modelos_aconselhamento_biblico && data.modelos_aconselhamento_biblico.tabela) {
                    const tabData = data.modelos_aconselhamento_biblico.tabela;
                    html += `<h3>Comparativo de Gerações</h3>`;
                    html += `<div class="tabela-comparativa-container" style="overflow-x:auto;">`;
                    html += `<table class="tabela-comparativa"><tr><th>${parseCitations(tabData[0].Perspectiva)}</th><th>${parseCitations(tabData[0].Noutético)}</th><th>${parseCitations(tabData[0]['Foco no Coração'])}</th></tr>`;
                    for(let i = 1; i < tabData.length; i++) {
                         html += `<tr><td><strong>${parseCitations(tabData[i].Perspectiva)}</strong></td><td>${parseCitations(tabData[i].Noutético)}</td><td>${parseCitations(tabData[i]['Foco no Coração'])}</td></tr>`;
                    }
                    html += `</table></div>`;
                }

                if (data.principios_praticos) {
                     data.principios_praticos.principios.forEach(p => {
                        html += `<div class="card"><h4 class="card-titulo">${parseCitations(p.nome)}</h4><p>${parseCitations(p.descricao)}</p></div>`;
                    });
                }
                
                if (data.fases_processo) {
                    html += `<h3>${parseCitations(data.fases_processo.titulo)}</h3><p>${parseCitations(data.fases_processo.introducao)}</p>`;
                    data.fases_processo.fases.forEach(f => {
                        html += `<p><strong>${f.numero}. ${parseCitations(f.nome)}:</strong> ${parseCitations(f.descricao)}</p>`;
                    });
                }
                
                if (data.detalhes_fases) {
                    data.detalhes_fases.forEach(f => {
                         html += `<div class="card"><h4 class="card-titulo">${parseCitations(f.fase)}</h4><p>${parseCitations(f.descricao)}</p></div>`;
                    });
                }
                
                if (data.casos_simulados) {
                    data.casos_simulados.forEach(caso => {
                        html += `<h3>${parseCitations(caso.titulo)}</h3>`;
                        caso.fases.forEach(fase => {
                            html += `<div class="card"><h4 class="card-titulo">${parseCitations(fase.fase)}</h4><p>${parseCitations(fase.descricao)}</p></div>`;
                        });
                    });
                }
                
                if (data.bibliografia) {
                    const bib = data.bibliografia;
                    html += `<h3>${parseCitations(bib.obras_fundamentais.titulo)}</h3>`;
                    bib.obras_fundamentais.livros.forEach(l => {
                        html += `<div class="card"><h4 class="card-titulo">${parseCitations(l.titulo)}</h4><p><em>Autor: ${parseCitations(l.autor)}</em></p><p>${parseCitations(l.descricao)}</p></div>`;
                    });
                    html += `<h3>${parseCitations(bib.obras_topicos_especificos.titulo)}</h3>`;
                     bib.obras_topicos_especificos.livros.forEach(l => {
                        html += `<div class="card"><h4 class="card-titulo">${parseCitations(l.titulo)}</h4><p><em>Autor: ${parseCitations(l.autor)}</em></p><p>${parseCitations(l.descricao)}</p></div>`;
                    });
                    html += `<h3>${parseCitations(bib.organizacoes_recursos.titulo)}</h3>`;
                     bib.organizacoes_recursos.recursos.forEach(r => {
                        html += `<div class="card"><h4 class="card-titulo">${parseCitations(r.nome)}</h4><p>${parseCitations(r.descricao)}</p></div>`;
                    });
                }

                conteudoCentral.innerHTML = html;
            }
        });
    </script>

</body>
</html>
